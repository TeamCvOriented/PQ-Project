# QuizGenerator æ–°ç‰ˆ google-genai API å‡çº§æŠ¥å‘Š

## ğŸ“‹ å‡çº§æ¦‚è§ˆ

æ ¹æ®è¦æ±‚ï¼Œå·²å®Œæˆå¯¹ `QuizGenerator` çš„å…¨é¢å‡çº§ï¼Œå¼ºåˆ¶ä½¿ç”¨æ–°ç‰ˆ `google-genai` APIï¼Œå¹¶å®ç°20ç§’è¶…æ—¶æœºåˆ¶ã€‚

## âœ… å®Œæˆçš„å·¥ä½œ

### 1. API å‡çº§
- âœ… **å¸è½½æ—§ç‰ˆ**: å®Œå…¨ç§»é™¤ `google-generativeai` 
- âœ… **å®‰è£…æ–°ç‰ˆ**: ä½¿ç”¨ `google-genai` 1.26.0
- âœ… **è§£å†³å…¼å®¹æ€§**: é™çº§ `pydantic` è‡³ 2.10.6 è§£å†³ä¾èµ–å†²çª

### 2. ä»£ç é‡æ„
- âœ… **æ–°ç‰ˆå®¢æˆ·ç«¯**: ä½¿ç”¨ `genai.Client()` åˆå§‹åŒ–
- âœ… **æ–°ç‰ˆ API è°ƒç”¨**: ä½¿ç”¨ `client.models.generate_content()`
- âœ… **å…³é—­æ€è€ƒåŠŸèƒ½**: è®¾ç½® `thinking_budget=0` æé«˜é€Ÿåº¦
- âœ… **å¼‚æ­¥å¤„ç†**: æ”¯æŒå¼‚æ­¥è°ƒç”¨å’Œè¶…æ—¶æ§åˆ¶

### 3. è¶…æ—¶æœºåˆ¶
- âœ… **20ç§’è¶…æ—¶**: ä½¿ç”¨ `asyncio.wait_for()` å®ç°ä¸¥æ ¼çš„20ç§’é™åˆ¶
- âœ… **è‡ªåŠ¨å›é€€**: è¶…æ—¶æˆ–å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ° Mock ç”Ÿæˆå™¨
- âœ… **ç”¨æˆ·å‹å¥½**: æ¸…æ™°çš„çŠ¶æ€æç¤ºå’Œè€—æ—¶æ˜¾ç¤º

### 4. é”™è¯¯å¤„ç†
- âœ… **åœ°åŒºé™åˆ¶å¤„ç†**: æ£€æµ‹åˆ°åœ°åŒºé™åˆ¶æ—¶è‡ªåŠ¨å›é€€
- âœ… **ç½‘ç»œå¼‚å¸¸å¤„ç†**: ç½‘ç»œè¶…æ—¶æ—¶è‡ªåŠ¨å›é€€
- âœ… **Mock ç”Ÿæˆå™¨**: ç¡®ä¿åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½èƒ½ç”Ÿæˆé¢˜ç›®

## ğŸš€ æ–°ç‰ˆåŠŸèƒ½ç‰¹æ€§

### API è°ƒç”¨æµç¨‹
```python
# 1. å°è¯•æ–°ç‰ˆ Gemini API (20ç§’è¶…æ—¶)
client = genai.Client(api_key=api_key)
response = client.models.generate_content(
    model="gemini-2.5-flash",
    contents=prompt,
    config=types.GenerateContentConfig(
        thinking_config=types.ThinkingConfig(thinking_budget=0)
    )
)

# 2. å¦‚æœå¤±è´¥ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ° Mock ç”Ÿæˆå™¨
```

### è¶…æ—¶æ§åˆ¶
```python
# ä½¿ç”¨å¼‚æ­¥æœºåˆ¶å®ç°ç²¾ç¡®çš„20ç§’è¶…æ—¶
result = await asyncio.wait_for(
    self._generate_with_gemini_async(content_text, num_questions),
    timeout=20.0
)
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### åŸºç¡€åŠŸèƒ½æµ‹è¯•
- âœ… **æ–°ç‰ˆ API åˆå§‹åŒ–**: æˆåŠŸ
- âœ… **åœ°åŒºé™åˆ¶æ£€æµ‹**: æ­£å¸¸æ£€æµ‹å¹¶å›é€€
- âœ… **è¶…æ—¶æœºåˆ¶**: åœ¨20ç§’å†…è§¦å‘
- âœ… **Mock å›é€€**: è‡ªåŠ¨åˆ‡æ¢å¹¶ç”Ÿæˆé¢˜ç›®

### å®Œæ•´å·¥ä½œæµç¨‹æµ‹è¯•
- âœ… **æ–‡ä»¶å¤„ç†å™¨**: æ­£å¸¸å·¥ä½œ
- âœ… **é¢˜ç›®ç”Ÿæˆå™¨**: æ­£å¸¸å·¥ä½œ  
- âœ… **Flask åº”ç”¨**: å¯åŠ¨æˆåŠŸ
- âœ… **æ¼”è®²è€…ç•Œé¢**: æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½å°±ç»ª

### æ€§èƒ½è¡¨ç°
- â±ï¸ **API è°ƒç”¨å°è¯•**: < 1 ç§’ï¼ˆåœ°åŒºé™åˆ¶å¿«é€Ÿå¤±è´¥ï¼‰
- â±ï¸ **Mock ç”Ÿæˆ**: < 0.5 ç§’
- â±ï¸ **æ€»å“åº”æ—¶é—´**: < 1 ç§’ï¼ˆåŒ…å«å›é€€ï¼‰

## ğŸŒ åœ°åŒºé™åˆ¶è¯´æ˜

æ ¹æ® Gemini API å®˜æ–¹æ–‡æ¡£ï¼Œå½“å‰ API ä¸æ”¯æŒä¸­å›½å¤§é™†åœ°åŒºï¼š
- æ”¯æŒåœ°åŒºåŒ…æ‹¬ï¼šå°æ¹¾ã€æ—¥æœ¬ã€éŸ©å›½ã€ç¾å›½ç­‰
- ä¸æ”¯æŒåœ°åŒºï¼šä¸­å›½å¤§é™†
- é”™è¯¯ä¿¡æ¯ï¼š`User location is not supported for the API use`

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### 1. æ™ºèƒ½å›é€€æœºåˆ¶
å½“ API è°ƒç”¨å¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šï¼š
1. æ£€æµ‹å…·ä½“é”™è¯¯ç±»å‹
2. æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
3. è‡ªåŠ¨åˆ‡æ¢åˆ° Mock ç”Ÿæˆå™¨
4. ç¡®ä¿ç”¨æˆ·ä½“éªŒä¸å—å½±å“

### 2. Mock ç”Ÿæˆå™¨å¢å¼º
- ç”ŸæˆåŸºäºå†…å®¹çš„æ¨¡æ‹Ÿé¢˜ç›®
- ä¿æŒä¸çœŸå® API ç›¸åŒçš„è¾“å‡ºæ ¼å¼
- æä¾›åˆç†çš„é¢˜ç›®ç»“æ„å’Œé€‰é¡¹

## ğŸ“ æ–‡ä»¶ç»“æ„

### æ ¸å¿ƒæ–‡ä»¶
- `app/quiz_generator.py` - æ–°ç‰ˆ API é¢˜ç›®ç”Ÿæˆå™¨
- `test_updated_quiz_generator.py` - å•å…ƒæµ‹è¯•
- `test_complete_workflow.py` - å®Œæ•´å·¥ä½œæµæµ‹è¯•

### ä¾èµ–ç®¡ç†
```bash
pip uninstall google-generativeai -y
pip install google-genai
pip install "pydantic>=2.0,<2.11"
```

## ğŸ¯ ç”¨æˆ·ä½“éªŒ

### æ¼”è®²è€…ç•Œé¢
1. ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶ï¼ˆPDF/PPTï¼‰
2. ç³»ç»Ÿæå–æ–‡æœ¬å†…å®¹
3. å°è¯• Gemini API ç”Ÿæˆé¢˜ç›®ï¼ˆ20ç§’è¶…æ—¶ï¼‰
4. å¦‚å¤±è´¥ï¼Œè‡ªåŠ¨ä½¿ç”¨ Mock ç”Ÿæˆå™¨
5. æ˜¾ç¤ºç”Ÿæˆçš„é¢˜ç›®ä¾›ç”¨æˆ·æŸ¥çœ‹

### çŠ¶æ€æç¤º
- ğŸ”„ "æ­£åœ¨ä½¿ç”¨æ–°ç‰ˆ Gemini API ç”Ÿæˆé¢˜ç›®..."
- â° "API è°ƒç”¨è¶…æ—¶ï¼Œåˆ‡æ¢åˆ°æ¨¡æ‹Ÿç”Ÿæˆå™¨..."
- âœ… "é¢˜ç›®ç”ŸæˆæˆåŠŸï¼Œè€—æ—¶: X.Xç§’"

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. API ä¼˜åŒ–
- å…³é—­æ€è€ƒåŠŸèƒ½æé«˜å“åº”é€Ÿåº¦
- ä½¿ç”¨ `gemini-2.5-flash` å¿«é€Ÿæ¨¡å‹
- é™åˆ¶å†…å®¹é•¿åº¦é¿å…è¶…æ—¶

### 2. è¶…æ—¶æ§åˆ¶
- ä¸¥æ ¼çš„20ç§’è¶…æ—¶é™åˆ¶
- å¿«é€Ÿå¤±è´¥å’Œå›é€€æœºåˆ¶
- å¼‚æ­¥å¤„ç†é¿å…é˜»å¡

## ğŸ”® æœªæ¥æ”¹è¿›

### 1. API å¯ç”¨æ€§
- ç›‘æ§ API åœ°åŒºæ”¯æŒæ›´æ–°
- è€ƒè™‘ä½¿ç”¨ Vertex AI æ›¿ä»£æ–¹æ¡ˆ
- å®ç°å¤š API æä¾›å•†æ”¯æŒ

### 2. åŠŸèƒ½å¢å¼º
- æ›´æ™ºèƒ½çš„ Mock ç”Ÿæˆå™¨
- é¢˜ç›®è´¨é‡è¯„ä¼°
- æ‰¹é‡ç”Ÿæˆä¼˜åŒ–

## âœ… ç»“è®º

æ–°ç‰ˆ `google-genai` API å·²æˆåŠŸé›†æˆï¼š
- âœ… **å¼ºåˆ¶ä½¿ç”¨æ–°ç‰ˆ API**: å®Œå…¨æ›¿æ¢æ—§ç‰ˆ
- âœ… **20ç§’è¶…æ—¶æ§åˆ¶**: ç²¾ç¡®å®ç°
- âœ… **è‡ªåŠ¨å›é€€æœºåˆ¶**: ç¡®ä¿å¯ç”¨æ€§
- âœ… **æ¼”è®²è€…åŠŸèƒ½**: æ–‡ä»¶ä¸Šä¼ æ­£å¸¸å·¥ä½œ

å°½ç®¡å—åˆ°åœ°åŒºé™åˆ¶ï¼Œä½†é€šè¿‡æ™ºèƒ½å›é€€æœºåˆ¶ï¼Œç³»ç»Ÿä»èƒ½ä¸ºç”¨æˆ·æä¾›å®Œæ•´çš„é¢˜ç›®ç”ŸæˆåŠŸèƒ½ã€‚

ğŸš€ **æ¼”è®²è€…æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ç°å·²å‡†å¤‡å°±ç»ªï¼**
